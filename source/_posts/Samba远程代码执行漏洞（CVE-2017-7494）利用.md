---
title: Samba远程代码执行漏洞（CVE-2017-7494）利用
date: 2017-06-01 15:49:40
tags:
- 漏洞复现
categories: 
- 漏洞
---

看了网上各位大佬的文章，基本上没有讲原理的。说实话我是个怕麻烦的人，所以就直接在学习怎么利用这个漏洞了，正好专业实训配置服务器是redhat要求配置samba服务，正好偷个懒。

<!--more-->


### 参考文章：

http://bobao.360.cn/learning/detail/3900.html
http://isron.cn/2017/05/30/CVE-2017-7494/



### 漏洞概述

安全客：Samba是在Linux和UNIX系统上实现SMB协议的一个软件。2017年5月24日Samba发布了4.6.4版本，中间修复了一个严重的远程代码执行漏洞，漏洞编号CVE-2017-7494，漏洞影响了Samba 3.5.0 之后到4.6.4/4.5.10/4.4.14中间的所有版本。360网络安全中心 和 360信息安全部的Gear Team第一时间对该漏洞进行了分析，确认属于严重漏洞，可以造成远程代码执行。


### 环境搭建


我在本地的redhat虚拟机上直接安装redhat镜像Package里面的软件包，
正好在影响版本之内
![](https://ooo.0o0.ooo/2017/06/17/5944e094a62b4.png)

还有一个搭建环境的方法就是直接用VulApps搭建好的靶场


> docker pull medicean/vulapps:s_samba_1  
> docker run -d -p 445:445 -p 139:139 -p 138:138 -p 137:137 medicean/vulapps:s_samba_1

![](https://ooo.0o0.ooo/2017/06/17/5944e0a75128a.png)

### 漏洞利用


攻击机：kali2016  
靶机：centos7 （docker安装vulapp的samba靶场）

开启镜像
> docker run -d -p 445:445 -p 139:139 -p 138:138 -p 137:137 medicean/vulapps:s_samba_1
![](https://ooo.0o0.ooo/2017/06/17/5944e0b47426e.png)

在kali的msf
![](https://ooo.0o0.ooo/2017/06/17/5944e0cc396c1.png)
成功了。。。

